<!DOCTYPE HTML>
<html>

<head>
	<link rel="icon" href="favicon.ico" />

	<title>Braindead Comedy</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="assets/css/main.css" />
	<style>
	#prices {
		width: 23em;
		}
		/* Get more exquisite with this example: https://www.w3schools.com/Css/css_table.asp , tried #prices div {width: 8em} but didn't work the same as inputBox below*/
	/* #prices td{ 
		width: 9em;
	} */
	#inputBox{
		width: 8em;
	}
	</style>
	<!-- Load Stripe.js on your website. -->
	<script src="https://js.stripe.com/v3"></script>
	<!-- <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript> -->

</head>

<body class="is-preload">

	<!-- Wrapper -->
	<div id="wrapper" class="divided">
		<!-- Braindead -->
		<section class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in"
			id="first">
			<div class="content">
				<h2>Braindead Comedy</h2>
				<p>Come see a bunch of comedians giving their all to make you laugh.<br><br>
					<i>Date:</i> Wed 4.9.2019 19:00 (doors 18:30)<br>
					<i>Language:</i> English<br>
					<i>Duration:</i> ~90 min (incl. break)<br>
					<i>Location:</i> Bar Loose in the basement (Annankatu 21, 00100 Helsinki) <br><br>
					Mailing list for future shows <a
						href="https://docs.google.com/forms/d/16eIgLQmXnf1ytcrwUD30uSDYE7-CYilgKS8HC9ZFo28/">here</a>

				</p>

				<table class="table" id="prices">
					<tbody>
						<tr>
							<td>Regular tickets (10€)</td>
							<td>
								<div id="inputBox">
									<input id="input1" type="number" class="numbera" placeholder="0" min="0" max="100"
										step="1" />
								</div>
							</td>
						</tr>
						<tr>
							<td>Student tickets (15% off)</td>
							<td>
								<div id="inputBox">
									<input id="input2" type="number" class="numbera" placeholder="0" min="0" max="100"
										step="1" />
								</div>
							</td>
			</tr>
			<tr>
				<td>Group tickets (20% off, min 5)</td>
				<td>

					<div id="inputBox">
						<input id="input3" type="number" class="numbera" placeholder="0" min="5" max="100" step="1" />
					</div>
				</td>
			</tr>
			<tr>
				<td><b>Total amount: </b><span id="mtotal"></span></td>
				<td></td>
			</tr>
			</tbody>
			</table>
			<button type="button" class="btn btn-primary" id="checkout-button-sku_Fe5t80kf4TpxOv"
				role="link">Buy</button>
			<button type="button" id="btnClear" class="btn btn-light">Clear</button>
			<!-- <button type="button" id="btnTest" class="btn btn-light">Test</button> -->
			<div id="error-message"></div>

			</div>
			<div class="image"> <img src="images/banner.jpg" alt="" />
	</div>
	</section>

	<!-- Sapiano's -->
		<section class="spotlight style1 orient-left content-align-left image-position-center onscroll-image-fade-in" id="sapiano">
			<div class="content">
				<h2>Peter Sapiano's soolo</h2>
				<p>Kanadasta Suomeen on stand-up komedia -soolo, jossa Peter Sapiano kertoo hauskasta elämänkokemuksestaan. Jos luulet elämäsi olevan hullua, tämä on show sinulle.
						Se on show mustasta lampaasta, elämästä Kanadassa, Suomessa ja muualla, ja se viihdyttää erilaisesti.
						Peterillä on kova komediatyyli, hän on energinen ja yksi parhaimmista tarinankertojista. Kaiken lisäksi saat mahdollisuuden kuulla kanadalaisen puhuvan 
						suomeksi Oulun murteella.
						Peter on nähty televisiossa Naurun Tasapainossa, Nelonen Stand upissa ja Poliisi TV:ssä.
					
					<br><br>
					<i>Date:</i> Wed 3.9.2019 20:30 (doors 20:00)<br>
					<i>Language:</i> Finnish<br>
					<i>Duration:</i> ~60 min<br>
					<i>Location:</i> Bar Loose in the basement (Annankatu 21, 00100 Helsinki) <br><br>
					Mailing list for future comedy shows <a
						href="https://docs.google.com/forms/d/16eIgLQmXnf1ytcrwUD30uSDYE7-CYilgKS8HC9ZFo28/">here</a>
				</p>

				<table class="table"  id="prices">
					<tbody>
						<tr>
							<td>Regular tickets (10€)</td>
							<td>
								<div id="inputBox">
									<input id="input1b" type="number" class="numberb" placeholder="0" min="0" max="100"
										step="1" />
								</div>
							</td>
						</tr>
						<tr>
							<td>Student tickets (15% off)</td>
							<td>
								<div id="inputBox">
									<input id="input2b" type="number" class="numberb" placeholder="0" min="0" max="100"
										step="1" />
								</div>
							</td>
			</tr>
			<tr>
				<td>Group tickets (20% off, min 5)</td>
				<td>

					<div id="inputBox">
						<input id="input3b" type="number" class="numberb" placeholder="0" min="5" max="100" step="1" />
					</div>
				</td>
			</tr>
			<tr>
				<td><b>Total amount: </b><span id="mtotalb"></span></td>
				<td></td>
			</tr>
			</tbody>
			</table>
			<button type="button" class="btn btn-primary" id="checkout-button-2"
				role="link">Buy</button>
			<button type="button" id="btnClearB" class="btn btn-light">Clear</button>
			<!-- <button type="button" id="btnTest" class="btn btn-light">Test</button> -->
			<div id="error-message"></div>

			</div>
			<div class="image">
				<img src="images/sap.jpg" alt="" />
			</div>
		</section>



	<!-- Footer -->
	<footer class="wrapper style1 align-center">
		<div class="inner">
			<ul class="icons">
				<li><a href="https://www.facebook.com/laughsinki/" class="icon brands style2 fa-facebook-f"><span
							class="label">Facebook</span></a></li>
				<li><a href="mailto:joanvalisgigs@gmail.com" class="icon style2 fa-envelope"><span
							class="label">Email</span></a></li>
			</ul>
			<p>&copy; Joan Valis 2019, design: <a href="https://html5up.net">HTML5 UP</a></p>
		</div>
	</footer>

	</div>

	<!-- Scripts of html5up-->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/jquery.scrollex.min.js"></script>
	<script src="assets/js/jquery.scrolly.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>

	<!-- Scripts of bootstrap-spinner-->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
		crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
		crossorigin="anonymous"></script>
	<script src="assets/js/bootstrap-input-spinner.js"></script>
	<script>
		$("input[type='number']").inputSpinner();

		var $fees = $(".numbera").change(function () { // input[type='number']
			var total = 0;
			//iterate through all the fee elements and find the total
			$fees.each(function () {
				var input = this.value; 				// console.log("Declared: "+input);
				if ($(this).attr("id") == "input1") {
					input *= 10; 					// console.log("Reg: "+ input);
				}
				else if ($(this).attr("id") == "input2") {
					input *= 8.5; 					// console.log("Stu: "+ input);
				}
				else if ($(this).attr("id") == "input3"){
					input *= 8;					// console.log("Gro: "+ input);
				}
				else{
					return;
				}
				total += (parseFloat($.trim(input)) || 0);				// console.log("Tot: "+ total);
			})
			$("#mtotal").text(total.toFixed(2) + '€');
		});


		var $feesB = $(".numberb").change(function () {
			var totalB = 0;
			//iterate through all the fee elements and find the total
			$feesB.each(function () {
				var inputB = this.value;
				if ($(this).attr("id") == "input1b") {
					inputB *= 10;
				}
				else if ($(this).attr("id") == "input2b") {
					inputB *= 8.5;
				}
				else if ($(this).attr("id") == "input3b"){
					inputB *= 8;
				}
				else{
					return;
				}
				totalB += (parseFloat($.trim(inputB)) || 0);
			})
			$("#mtotalb").text(totalB.toFixed(2) + '€');
		});

		 $('#btnClear, #btnClearB').click(function () {
		//$('.btn-light').click(function () { //ALT
			// alert("Entered");
			/*Clear all inputs with class number*/
			$(".numbera").val('');
			$(".numberb").val('');
			/*Clear textarea using id */
			$("#mtotal").text('');
			$("#mtotalb").text('');
		});
		//Uncomment this and button above to test values
		// $('#btnTest').click(function () {
		// 	var regular = parseInt($('#input1b').val()); //ALT: document.getElementById('input1').value 
		// 	var student = parseInt($('#input2b').val());
		// 	var group = parseInt($('#input3b').val());
		// 	alert(regular + " " + typeof regular + " " + student + " " + typeof student + " " + group + " " + typeof group + "\n" + !isNaN(regular) + " " + !isNaN(student) + " " + !isNaN(group));
		// 	//NaN number NaN number 7 number 
		// 	//true true true
		// });
	</script>
	<!-- JSFiddle of 3 inputs getting an output: http://jsfiddle.net/pjdkyxft/1/ -->

	<script>
		//Production
		var stripe = Stripe('pk_live_4wZpMWikdmOFg6OZnSsF1zn7');
		var checkoutButton = document.getElementById('checkout-button-sku_Fe5t80kf4TpxOv');
		checkoutButton.addEventListener('click', function () {
			var items = [];
			var regular = parseInt($('#input1').val()); //ALT: document.getElementById('input1').value 
			var student = parseInt($('#input2').val());
			var group = parseInt($('#input3').val());

			if (!isNaN(regular)) {
				items.push({ sku: 'sku_Fe5t80kf4TpxOv', quantity: regular });
			}
			if (!isNaN(student)) {
				items.push({ sku: 'sku_Fe6S60Vz0kU0YV', quantity: student });
			}
			if (!isNaN(group)) {
				items.push({ sku: 'sku_Fe6TRh1LD7I6op', quantity: group });
			}

			stripe.redirectToCheckout({
				items,
				successUrl: 'https://joanvalis.github.io/braindead/success.html',
				cancelUrl: 'https://joanvalis.github.io/braindead/canceled.html',
			})
				.then(function (result) {
					if (result.error) {
						var displayError = document.getElementById('error-message');
						displayError.textContent = result.error.message;
					}
				});
		}, { passive: true });

	//Testing
	// var stripeTest = Stripe('pk_test_y9SWrPjd9ormdQk4EmIMZHX8');
	var checkoutButtonB = document.getElementById('checkout-button-2');
	checkoutButtonB.addEventListener('click', function () {
		var items = [];
		var regular = parseInt($('#input1b').val()); //ALT: document.getElementById('input1').value 
		var student = parseInt($('#input2b').val());
		var group   = parseInt($('#input3b').val());
		//Testing
		if (!isNaN(regular)){
			items.push({sku: 'sku_FfWxcCwYxdYq4l', quantity: regular});
		}
		if(!isNaN(student)){
			items.push({sku: 'sku_FfWyIJGiz1CQ10', quantity: student});
		}
		if(!isNaN(group)){
			items.push({sku: 'sku_FfWy9O4I830lql', quantity: group});
		}
		stripe.redirectToCheckout({
			items,
			successUrl: 'https://joanvalis.github.io/braindead/success.html',
			cancelUrl: 'https://joanvalis.github.io/braindead/canceled.html',
		})
		.then(function (result) {
		if (result.error) {			
			var displayError = document.getElementById('error-message');
			displayError.textContent = result.error.message;
		}
		});
	}, { passive: true });

	//Testing
// 		if (!isNaN(regular)){
// 			items.push({sku: 'sku_F7qaiXVy2h0tBs', quantity: regular});
// 		}
// 		if(!isNaN(student)){
// 			items.push({sku: 'sku_FeUvhzVhBdMFMY', quantity: student});
// 		}
// 		if(!isNaN(group)){
// 			items.push({sku: 'sku_Ff0Kkaf4hYkKYo', quantity: group});
// 		}
	</script>
</body>
</html>